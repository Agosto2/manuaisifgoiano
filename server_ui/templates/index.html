{% extends 'server_ui/templates/base-bootstrap.html' %}
{% load i18n %}
{% block title %}{{ settings.SITE_TITLE }}{% endblock %}
{% load institution_extras %}
{% block header %}
  {% block js %}
   <script type="text/javascript">
    $(document).ready(function() {
        $('#list').dataTable({
          "language": {
              "lengthMenu": "Exibindo _MENU_ registros por página",
              "zeroRecords": "Não foram encontrados registros",
              "info": "Página _PAGE_ de _PAGES_",
              "infoEmpty": "Nenhum registro encontrado",
              "infoFiltered": "(filtered from _MAX_ total records)",
              "search": "Localizar:",
              "Previous": "Anterior",
              "next": "Próxima",
              "paginate": {
                  "next": "Próxima",
                  "previous": "Anterior",
              }
          }});
      });  
    </script>
  {% endblock %}
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-xs-8">
    <h3>{{ settings.SITE_TITLE }}</h3>
    <h4>
      {{settings.WELCOME_MESSAGE|safe}}
    </h4>
  </div>
  <div class="col-xs-4">
    {% if user %}
      <h5 class="text-right">{% trans "Welcome" %} <b>{{user.pretty_name|safe}}</b></h5>
      {% if create_p %}
        <div class="text-right">
          <a class="btn btn-primary btn-xs" href="{% url "helios.views.election_new" %}">{% trans "create an election" %}</a>
        </div>
      {% endif %}
    {% endif %}
  </div>
</div>
{% if elections %}
<div class="row">
  <div class="col-xs-12"> 
    <form class="form-inline">
      <div class="form-group">
        <label for="ano">Ano:</label>
        <select id="ano">
          <option value="">2015</option>
          <option value="">2014</option>
        </select>
      </div>
      <button type="Consultar" class="btn btn-primary btn-xs">Listar</button>
    </form>
  </div>
</div>
<div class="row">
  <div class="col-md-8"> 
    <div class="row" style="padding-top: 10px">
        {% with sliced_institutions=institutions|slice_in_two %}
        <div class="col-md-6">
            <table class="table table-condensed table-striped table-bordered">
            <thead>
            <tr>
              <td>{% trans "Institution" %}</td>
              <td>{% trans "New" %}</td>
              <td>{% trans "In progress" %}</td>
              <td>{% trans "Done" %}</td>
            </tr>
            </thead>
            <tbody>
            {% for institution in sliced_institutions.0 %}
            <tr>
              <td>{{ institution.name }}</td>
              <td><a href="#" data-toggle="modal" data-target="#elections_list">5</a></td>
              <td><a href="#">2</a></td>
              <td><a href="#">10</a></td>
            </tr>
            {% endfor %}
            </tbody>
            </table>
        </div>
        <div class="col-md-6">
            <table class="table table-condensed table-striped table-bordered">
              <thead>
                <tr>
                  <td>{% trans "Institution" %}</td>
                  <td>{% trans "New" %}</td>
                  <td>{% trans "In progress" %}</td>
                  <td>{% trans "Done" %}</td>
                </tr>
              </thead>
            <tbody>
            {% for institution in sliced_institutions.1 %}
            <tr>
                <td>{{ institution.name }}</td>
                <td><a href="#" data-toggle="modal" data-target="#elections_list">5</a></td>
                <td><a href="#">2</a></td>
                <td><a href="#">10</a></td>
            </tr>
            {% endfor %}
            </tbody>
            </table>
        </div>
    {% endwith %}
    </div>

    <div class="modal" id="elections_list">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title" id="gridSystemModalLabel">IFSC - News</h4>
          </div>
          <div class="modal-body">
            <table id="list" class="table table-condensed table-striped table-bordered">
              <thead>
                <tr>
                  <td>{% trans "Name" %}</td>
                  <td>{% trans "Start" %}</td>
                  <td>{% trans "End" %}</td>
                </tr>
              </thead>
              <tbody>
                {% for election in elections %}
                  <tr>
                    <td>
                      <a href="{% url "helios.views.election_shortcut" election.short_name %}">{{election.name}}</a>
                      {% if settings.SHOW_USER_INFO %}<br /> {% trans "by" %} {{election.admin.pretty_name}}{% endif %} 
                    </td>
                    <td>01/05/2015</td>
                    <td>31/05/2015</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
            <div class="modal-footer"></div>
          </div>
        </div>
      </div>
    </div>
  </div> 
{% else %}
  <h4>{% trans "no featured elections at the moment" %}</h4>
{% endif %}
  <div class="col-md-4" style="padding-top: 10px">
    {% if user %}
  
      <!-- deve ser acrescentando as condições para serem exibidos os itens abaixo ... -->
      <p class="bg-info" style="padding: 3px">
        <strong>Administração</strong>
      </p>
      <ul>
        <li>
          <a href="/helios/elections/6b1f7644-1b45-11e5-9fc3-005056b03c27/view">teste11</a>
        </li>
        <li>
          <a href="/helios/elections/c6c0db86-151f-11e5-916d-005056b03c27/view">Eleição Identity Provider</a>
        </li>
      </ul>
      <a class="tiny button" href="/helios/elections/administered">ver todas</a>
      <br/>
      <br/>
      <p class="bg-info" style="padding: 3px">
        <strong>Votos Recentes</strong>
      </p>
      <ul>
        <li>
          <a href="/helios/elections/c6c0db86-151f-11e5-916d-005056b03c27/view">Eleição Identity Provider</a>
        </li>
      </ul>
      <a class="tiny button" href="/helios/elections/voted">ver todas</a>
      <br/>
      <br/>
      <!-- ... até aqui! -->
      <p class="bg-info" style="padding: 3px">
        <b>Informações sobre contato</b><br/>
      </p>        
      Administrador do sistema em sua instituição é:<br/>
      <br/>
      Beltrano dos Santos<br/>
      Telefone : +55<br/>
      E-mail: beltrano@mail.com<br/>
      <p class="bg-info" style="padding: 3px"/>
    {% endif %}
  </div> <!-- span2 -->
</div>
{% endblock %}
